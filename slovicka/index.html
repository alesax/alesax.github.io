<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> <head> <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
	<meta http-equiv="Content-Language" content="cs" />
	<meta name="author" content="Alesak" />
	<script language="JavaScript" type="text/javascript">
function makeSelect(tx)
{
	var e = document.createElement('select');
	var result = tx.split(/\//);
	var correct = result[0];

	shuffleArray(result);

	var o = document.createElement('option');
	o.textContent = '';
	e.appendChild(o);

	for (var i = 0; i < result.length; i ++) {
		var o = document.createElement('option');
		var r = result[i];
		if (r.endsWith('*')) {
			r = r.substr(0, r.length-1);
			correct = r;
		}
		o.textContent = r;
		e.appendChild(o);
	}
	e._correct = correct;
	return (e);
}

function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}

function dragLStart(e)
{
	document._dragletel = e.target;
	console.log("dragLStart: " + e.target.textContent);
}

function dragLEnter(e)
{
	e.preventDefault();
}

function dragLDrop(e)
{
	e.preventDefault();
}

function dropL(e)
{
	e.preventDefault();
}

function allowLDrop(e)
{
	var el = e.target;
	var re = el.getBoundingClientRect();
	if (el == document._dragletel)
		return;
	if (el.parentNode != document._dragletel.parentNode)
		return;

	if (e.clientX < ((re.left+re.right)/2)) {
		el.parentNode.insertBefore(document._dragletel, el);
	} else if (el.nextSibling && el.nextSibling != document._dragletel) {
		el.parentNode.insertBefore(document._dragletel, el.nextSibling);
	} else if (el.nextSibling == null) {
		el.parentNode.appendChild(document._dragletel);
	}
	e.preventDefault();
}



function dragStart(e)
{
	e.dataTransfer.setData("id", 1);
	console.log ("dragStart " + e.target + " id = " + e.target.id);
	if (e.target.nodeName != 'DIV') return;
	document._dragged = e.target;
	document._last_parent = e.target.parentNode;
	document._last_content = e.target;
	e.dataTransfer.dropEffect = "copy";
	
	document._prevdrag = null;
//e.preventDefault();
}

function dragDrop(e)
{
	console.log ("dragDrop");
	e.preventDefault();
}

function dragEnter(e)
{
	console.log ("dragEnter " + e.target.textContent);
	e.preventDefault();
	//document._prevdrag = null;
}

function drop(e)
{
	console.log ("drop");
	e.preventDefault();
	document._prevdrag = null;
}

function allowDrop(e)
{
	var el = e.target;
	var re = el.getBoundingClientRect();

	if (el.nextSibling && el.nextSibling.className == 'dragd') 
		el = el.nextSibling;

	if (el.parentNode && el.parentNode.className == 'dragd')
		el = el.parentNode;

	if (el.className != 'dragd') return;

	if (document._last_parent) {
		document._last_parent.appendChild(document._last_content);
		document._last_parent = null;
	}

	if (el.firstChild) {
		document._last_parent = el;
		document._last_content = el.firstChild;
	}

	el.appendChild(document._dragged);

	e.preventDefault();
	return;
}

function makeQuery(t)
{
	t = t.trim();
	var e = document.createElement('p');
	//var r = /([^\/]* )*(([^ ]+\/)+[^ ]+)( [^\/]*)*/.exec(t)
	var start = 0;
	var rx = /(([^ ]+\/)+[^ ]+)/g;
	var napplied = 0;
	while (r = (rx.exec(t))) {
		var x = document.createTextNode(t.substr(start,r.index));
		e.appendChild(x);
		start = r.index;
		e.appendChild(makeSelect(r[0]));
		start += r[0].length;
		napplied ++;
	}
	if (napplied > 0) {
		var x = document.createTextNode(t.substr(start,t.length-start));
		e.appendChild(x);
		return (e);
	}

	if (t.startsWith('|')) {
		e.className = "sorter";
		var ar = t.substr(1).split(' ');
		var solution = ar.join('--');
		e._solution = solution;
		shuffleArray(ar);
		for (var i = 0; i < ar.length; i ++) {
			var w = ar[i].trim();
			if (!w.length) continue;
			var ne = document.createElement('div');
			ne.className = 'tagger';
			ne.textContent = w;

			ne.setAttribute('draggable', 'true');
			ne.addEventListener('dragstart', dragStart);
			ne.addEventListener('dragover', allowDrop);
			ne.addEventListener('dragenter', dragEnter);
			ne.addEventListener('dragend', drop);
			ne.addEventListener('drop', drop);

			e.appendChild(ne);

		}
	}

	return (e);
}

function loadSlovicka(eln, nen)
{
	var e = document.getElementById(eln);
	var ne = document.getElementById(nen);
	var result = e.textContent.split(/\r?\n/);
	var slovicka = {};
	var lekce = null;
	for (var i = 0; i < result.length; i ++) {
		[s_e,s_c] = result[i].split('|');
		if (s_e.startsWith('#')) {
			lekce = s_e.substr(1);
			slovicka[lekce] = [];
		} else if (s_c != undefined) {
			slovicka[lekce].push([s_e,s_c]);
		}
	}
	return (slovicka);
}

function dblClick(e)
{
	if (e.target.parentNode.nodeName == "DIV") {
		var els = document.getElementById('dragwords');
		for (var i = 0; i < els.children.length; i++) {
			var x = els.children[i];
			if (x.lastChild.firstChild == null) {
				x.lastChild.appendChild(e.target);
				break;
			}
		}
	} 
}

function checkLetters()
{
	var e = document.getElementById("shuffletters");

	for (var i = 0; i < e.children.length; i++) {
		var x = e.children[i];
		if (x.className != 'shuffletrow') continue;

		var ang = '';
		for (var n = 0; n < x.lastChild.children.length; n++) {
			var y = x.lastChild.children[n];
			ang += y.textContent;
		}
		if (ang == x._value) {
			x.parentNode.removeChild(x);
		}

	}
}
function createDraggingLetters(lst, chpt, limit)
{
	var sls = [];
	var kys = Object.keys(lst);
	for (var i = 0; i < chpt.length; i++) {
		if (Number.isInteger(chpt[i])) {
			var x = chpt[i];
			if (x < 0) {
				x += kys.length;
			sls = sls.concat(lst[kys[x]]);
			}
		} else 
			sls = sls.concat(lst[chpt[i]]);
	}
	document._chapters = "" + chpt;
	document._ntry = 0;

	sls = sls.filter(function(x) {
		if (x[0].includes(",") || x[0].includes(" "))
			return false;
		return true;

	});
	shuffleArray(sls);
	if (limit != undefined)
		sls = sls.slice(0,limit);

	sls.forEach(function(x) {
		var el = document.createElement("div");
		el.className = "shuffletrow";
		el.appendChild(document.createTextNode(x[1]));
		el._value = x[0];
		var els = document.createElement("div");
		els.className = "shuffletters";
		el.appendChild(els);

		var shl = x[0].split("");
		shuffleArray(shl);
		shl.forEach(function(l) {
			var lx = document.createElement("div");
			lx.textContent = l;

			lx.setAttribute('draggable', 'true');
			lx.addEventListener('dragstart', dragLStart);
			lx.addEventListener('dragover', allowLDrop);
			lx.addEventListener('dragenter', dragLEnter);
			lx.addEventListener('dragend', dropL);
			lx.addEventListener('drop', dropL);
			els.appendChild(lx);


		});


		document.getElementById("shuffletters").appendChild(el);
	});

	el = document.createElement("button");
	el.textContent = "Zkontrolovat pÃ­smena";
	el.addEventListener('click', checkLetters);
	document.getElementById("shuffletters").appendChild(el);
}


function createDraggingWords(lst, chpt, limit)
{
	var sls = [];
	var kys = Object.keys(lst);
	for (var i = 0; i < chpt.length; i++) {
		if (Number.isInteger(chpt[i])) {
			var x = chpt[i];
			if (x < 0) {
				x += kys.length;
			sls = sls.concat(lst[kys[x]]);
			}
		} else 
			sls = sls.concat(lst[chpt[i]]);
	}
	document._chapters = "" + chpt;
	document._ntry = 0;
	shuffleArray(sls);
	if (limit != undefined)
		sls = sls.slice(0,limit);

	var div = document.createElement('div');
	var table = document.createElement('table');
	var tbody = document.createElement('tbody');
	tbody.id = 'dragwords';
	table.appendChild(tbody);
	var res = [];
	
	var y = 0;
	sls.forEach(function(x) {
		y++;
		if (x == undefined) return;
		var tr = document.createElement('tr');
		tbody.appendChild(tr);
		var td = document.createElement('td');
		//alert(x + "-" + limit);
		td.textContent = x[0];
		td._value = y;
		td.addEventListener('dragover', allowDrop);
		tr.appendChild(td);
		td = document.createElement('td');
		var ne = document.createElement('div');
		ne.textContent = x[1];
		res.push(ne);
		ne._value = y;
		tr.appendChild(td);
		td.className = 'dragd';
		td.addEventListener('dragover', allowDrop);
		//td.addEventListener('dragenter', dragEnter);

		ne.setAttribute('draggable', 'true');
		ne.addEventListener('dragstart', dragStart);
		ne.addEventListener('dragover', allowDrop);
		ne.addEventListener('dragenter', dragEnter);
		ne.addEventListener('dragend', drop);
		ne.addEventListener('drop', drop);
		ne.addEventListener('dblclick', dblClick);
	});
	shuffleArray(res);
	document.getElementById('wocab').insertBefore(table, document.getElementById('wocab').firstChild);
	res.forEach(function(x) {
			div.appendChild(x);
			});
	document.getElementById('wpool').appendChild(div);
}



function init(eln, nen)
{
	var slovicka = loadSlovicka(eln, nen);
	var chapters = [-1];
	var limit = undefined;
	var hsh = window.location.hash;
	if (hsh && hsh.length > 1) {
		if (hsh.includes("#limit")) {
			[hsh,limit] = hsh.split("#limit");
			limit = Number.parseInt(limit);
		}
		chapters = hsh.substring(1).split(',');
	}
	document._definition = chapters + " ";
	if (limit)
		document._definition += "_limit_" + limit;

	createDraggingWords(slovicka, chapters, limit);

	//createDraggingLetters(slovicka, chapters, 2);
}

function ovateRpt()
{
	var ls = document.getElementsByTagName('td');
	for (var i = 0; i < ls.length; i++) {
		var s = ls [i];
		var r = s.getBoundingClientRect();
		s._mx += s._dx;
		s._my += s._dy;
		s._mr += s._dr;
		s.style.left = (s._mx) + "px";
		s.style.top = (s._my) + "px";
	//	s.style.transform = "rotate(" + s._mr + "deg)";

		var r = s.getBoundingClientRect();
		if (r.right > window.innerWidth) {
			s._dx = - s._dx;
			s._mx = window.innerWidth - r.width;
		} else if (r.left < 0) {
			s._dx = - s._dx;
		}
		if (r.bottom > window.innerHeight || r.top < 0) s._dy = - s._dy;
	}


}
function ovate()
{
	var ls = document.getElementsByTagName('td');
	for (var i = 0; i < ls.length; i++) {
		var s = ls [i];
		var r = s.getBoundingClientRect();
		s._mx = r.left;
		s._my = r.top;
		s._mr = 0;
		s._dx = Math.random()*2 - 1;
		s._dy = Math.random()*2 - 1;
		s._dr = Math.random()*2 - 1;
	}

	for (var i = 0; i < ls.length; i++) {
		var s = ls [i];
		var r = s.getBoundingClientRect();
		s.style.position = 'absolute';
		s.style.left = (s._mx) + "px";
		s.style.top = (s._my) + "px";
	//s.style.transform = "rotate(1deg)";
		//alert("r.left = " + r.left + " " + s.style.left);
	}
	setInterval(ovateRpt, 5);

}

function checkDrags(e)
{
	var okcnt = 0, errcnt = 0;
	for (var i = 0; i < e.children.length; i++) {
		var x = e.children[i];
		var res = x.lastChild.firstChild?x.lastChild.firstChild._value:null;

		//alert(x.firstChild._value + "--" + res);
		if (x.firstChild._value != res) {
			x.className = "error";
			errcnt += 1;
		} else {
			x.className = "correct";
			okcnt += 1;
		}
	}
	document._ntry += 1;
	if (errcnt == 0) {
		ovate();
	}
}

function check(evt, ee)
{
	var e = document.getElementById(ee);
	var ls = e.getElementsByTagName("select");
	for (var i = 0; i < ls.length; i++) {
		var s = ls [i];
		if (s.value != s._correct) {
			s.parentNode.className = 'bad';
		} else {
			s.parentNode.className = 'good';
		}
	}
	var ls = e.getElementsByClassName("sorter");
	for (var i = 0; i < ls.length; i++) {
		var s = ls [i];
		var ar = [];
		for (var n = 0; n < s.childNodes.length; n ++) {
			ar.push(s.childNodes[n].textContent);
		}
		console.log(s._solution + "!=" + ar.join("--"));
		if (s._solution == ar.join("--"))
			s.className = 'sorter good';
		else
			s.className = 'sorter bad';
	}
	evt.stopPropagation();
}
	</script>
	<title>AngliÄtina pro MarkÃ©tu</title>
<style type="text/css">
	p { margin: 0.5em; padding: 0.5em; display: block; }
	.bad { background: red; }
	.good { background: green; }
	.tagger {
	display: inline;
	 margin: 0.5em;
	padding: 0.5em;
	border: 1px solid black;
}

.correct {
	background-color: rgb(100,255,100) !important;
}
.error {
	background-color: red !important;
}

.dragd {
	width: 100px;
	border: 0px solid red;
}

#wocab table {
	width: 100%;
	border: 3px solid black;
	border-collapse: collapse;
}

#wocab table td {
padding: 0.3em;
	width: 50%;
	border: 1px solid black;
}

#wpool div {
	cursor: pointer;
}

.shuffletters div {
	cursor: pointer;
	display: inline-block !important;
	width: 2em !important;
	height: 1.5em;
	text-align: center;
	margin: 1px;
	padding: 2px;
	border: 1px solid black;
}

.shuffletters {
	padding-left: 2em;
}

.shuffletrow div {
display: inline;
}

</style>

</head>
<body onload="init('s1', 'f1')">
<div id="wocab">
<div id="wpool"/>
</div>
<pre id="s1" style="display:none">
#A
British|britskÃ½
Czech|ÄeskÃ½
the Czech Republec|ÄeskÃ¡ republika
France|Francie
French|francouzskÃ½,francouzÅ¡tina
Hungarian|maÄarskÃ½,maÄarÅ¡tina
Hungary|MaÄarsko
Poland|Polsko
Polish|polskÃ½,polÅ¡tina
Slovak|slovenskÃ½,slovenÅ¡tina
Spain|Å panÄlsko
Spanish|spanÄlskÃ½,Å¡panÄlÅ¡tina
Swiss|Å¡vÃ½carskÃ½
Switzerland|Å vÃ½carsko
the UK|SpojenÃ© krÃ¡lovstvÃ­
another|jinÃ½,dalÅ¡Ã­
competition|soutÄÅ¾
finish|dokonÄit,skonÄit
hurry up|spÄchat
nationality|nÃ¡rodnost
press|stisknout
prize|cena (v soutÄÅ¾i)
save|uloÅ¾it
send|poslat
singer|zpÄvÃ¡k
slowly|pomalu
win|vyhrÃ¡t
#B
assembly hall|aula
canteen|(Å¡kolnÃ­) jÃ­delna
classroom|tÅÃ­da,uÄebna
entrance|vchod
gym|tÄlocviÄna
head's office|Åeditelna
library|knihovna
Music room|hudebna
playground|hÅiÅ¡tÄ
playing fields|hÅiÅ¡tÄ,sportoviÅ¡tÄ
Science|pÅÃ­rodovÄdnÃ© pÅedmÄty
Science lab|laboratoÅ
staffroom|sborovna
stairs|schody
toilet|toaleta
bell|zvonek
brilliant|skvÄlÃ½,ÃºÅ¾asnÃ½
clothes|obleÄenÃ­
concert|koncert
depend(it depends)|pÅijde nato jestli
dining room|jÃ­delna
exchange student|student na vÃ½mÄnnÃ©m pobytu
first floor|prvnÃ­ poschodÃ­
ground floor|pÅÃ­zemÃ­
gymnastics|gymnastika
head teacher|Åeditel
imagine|pÅedstavovat si
introduce|pÅedstavit
joke|vtip
left|levÃ½, vlevo
never|nikdy
often|Äasto
Pleased to meet you|RÃ¡d vÃ¡s poznÃ¡vÃ¡m
right|pravÃ½, vpravo
show around|provÃ©st nÄkoho po nÄÄem, ukÃ¡zat nÄkomu nÄco
sometimes|nÄkdy
traditional|tradiÄnÃ­
usually|obvykle
visitor|nÃ¡vÅ¡tÄvnÃ­k
way|cesta
wear|nosit
welcome|vÃ­tejte
#C
break time|pÅestÃ¡vka
cute|roztomilÃ½
ever|nÄkdy
letter|pÃ­smeno,dopis
mistake|chyba
outside|venku
#1A
basketball|koÅ¡Ã­kovÃ¡
butterfly|motÃ½l
dance|tanÄit
dive|potÃ¡pÄt se
guitar|kytara
gymnastics|gymnastika
do magic|kouzlit
speak|mluvit
sudoku|sudoku
buddy|kÃ¡moÅ¡
certificate|certifikÃ¡t
information|informace
school report|vysvÄdÄenÃ­
See you soon|Brzy na vidÄnou
teach|uÄit
weather|poÄasÃ­
#1B
aunt|teta
brother|bratr
chold-children|dÃ­tÄ-dÄti
cousin|bratranec, sestÅenice
daughter|dcera
father|otec
grandfather|dÄdeÄek
grandmother|babiÄka
grandparents|prarodiÄe
grand-grandfather|pradÄdeÄek
grand-grandmother|prababiÄka
husband|manÅ¾el
mother|matka
nephew|synovec
niece|neteÅ
parents|rodiÄe
sister-in-law|Å¡vagrovÃ¡
son|syn
stepbrother|nevlastnÃ­ bratr
stepfather|nevlastnÃ­ otec
stepsister|nevlastnÃ­ sestra
uncle|strÃ½c
wife|manÅ¾elka
boring|nudnÃ½
can't stand|nemoci nÄkoho/nÄco vystÃ¡t
Christmas|VÃ¡noce
elastic|pruÅ¾nÃ½
escape|utÃ©ci, uniknout
family tree|rodokmen
hate|nenÃ¡vidÄt
invent|vynalÃ©zt
It's not fair!|To nenÃ­ fÃ©r!
nurse|zdravotnÃ­ sestra
run away from|utÃ­kat pryÄ od
sky|nebe
surfer|surfaÅ
#1C
beard|plnovous
nose|nos
eyes|oÄi
hair|vlasy
clever|chytrÃ½
curly (hair)|kudrnatÃ½
friendly|pÅÃ¡telskÃ½
fringe|ofina
lively|Å¾ivÃ½, energickÃ½
moustache|knÃ­r
naughty|zlobivÃ½
noisy|hluÄnÃ½
pony tail|culÃ­k
quiet|tichÃ½
shy|plachÃ½
sporty|sportovnÄ zaloÅ¾enÃ½
catalogue|katalog
lovely|roztomilÃ½
remote|dÃ¡lkovÃ½ (ovladaÄ)
wonderful|ÃºÅ¾asnÃ½
#1D
cream|smetana
crimson|sytÄ ÄervenÃ½
cut up|rozkrÃ¡jet
eyebrows|oboÄÃ­
forget|zapomenout
gauze|gÃ¡za
glue|lepidlo
hold|drÅ¾et
laugh|smÃ¡t se
lip|ret
pass (sb sth)|podat (nÄkomu nÄco)
scissors|nÅ¯Å¾ky
soon|brzy
spot|skvrna
He's saying he's hungry.|ÅÃ­kÃ¡, Å¾e mÃ¡ hlad.
Look! These are his eyebrows.|PodÃ­vej! To je jeho oboÄÃ­!
Look, do it like this.|PodÃ­vej, udÄlej to takto.
Sorry, can you explain, please?|Pardon, mÅ¯Å¾ete to prosÃ­m vysvÄtlit?
Sorry, can you say that again, please?|PromiÅte, mÅ¯Å¾ete to prosÃ­m zopakovat?
What does eyebrows mean?|Co znamenÃ¡ "eyebrows"?
What's he saying? I don't understand.|Co ÅÃ­kÃ¡? NerozumÃ­m.
#2A
armchair|kÅeslo
attic|pÅ¯da
basin|umyvadlo
bath|vana
bathroom|koupelna
bed|postel
bedroom|loÅ¾nice
box|krabice
carpet|koberec
chair|Å¾idle
cupboard|kredenc,kuchyÅskÃ¡ skÅÃ­Åka
desk|stÅ¯l,lavice
dining room|jÃ­delna
garage|garÃ¡Å¾
lamp|lampa
light|svÄtlo
picture|obrÃ¡zek
poster|plakÃ¡t
shower|sprcha
sofa|pohovka
table|stÅ¯l
TV|televize
wardrobe|skÅÃ­Å
dowstairs|dolÅ¯, o patro nÃ­Å¾
laugh at|smÃ¡t se nÄkomu, nÄÄemu
scared|vystraÅ¡enÃ½
upstairs|nahoru, o patro vÃ½Å¡
#2B
No way!|Ani nÃ¡pad!
run down|bÄÅ¾et dolÅ¯
#2C
baker's|pekaÅstvÃ­
butcher's ÅeznictvÃ­
bookshop|knihkupectvÃ­
corner-shop|obchÅ¯dek se smÃ­Å¡enÃ½m zboÅ¾Ã­m
florist's|kvÄtinÃ¡ÅstvÃ­
games shop|obchod s pc hrami
pet shop|zverimex
shoe shop|obuvnictvÃ­
sports shop|obchod se sportovnÃ­mi potÅebami
sweet shop|cukrÃ¡rna
book (v)|zamluvit, objednat
fabulous|ÃºÅ¾asnÃ½, skvÄlÃ½
football pitch|fotbalovÃ© hÅiÅ¡tÄ
heaven|rÃ¡j
incredible|neuvÄÅitelnÃ½
That's a pity|To je Å¡koda
relaxing|odpoÄinkovÃ½, uvolÅujÃ­cÃ­
remember|pamatovat
rollerblade|koleÄkovÃ© brusle
voucher|poukÃ¡zka
</pre>
<form id="f1">
</form>
<button onclick="checkDrags(document.getElementById('dragwords'))">Zkontrolovat</button>
<div id="shuffletters"/>
<button style="display:none" onclick="ovate(document.getElementById('dragwords'))">Vyhrat</button>
</body>
</html>
